<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>Decap - Hugo Catalog</title><link rel=stylesheet href=https://benmarte.github.io/hugo-catalog-site/main.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=apple-touch-icon sizes=180x180 href=https://benmarte.github.io/hugo-catalog-site/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://benmarte.github.io/hugo-catalog-site/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://benmarte.github.io/hugo-catalog-site/favicon-16x16.png><link rel=manifest href=https://benmarte.github.io/hugo-catalog-site/site.webmanifest><meta property="og:title" content="Decap"><meta property="og:description" content="What is Decap? Decap is an open source What You See Is What You Get (WYSIWYG) that can be used with static site generators in order to provide an easy to use editor view while still taking advantage of using your CI/CD pipeline for deploying your site.
Prerequisites:
Netlify account Github OAuth app In order to enable decap you need to have a Netlify and Github account, if you don&rsquo;t have an account sign up for a free one before getting started."><meta property="og:type" content="article"><meta property="og:url" content="https://benmarte.github.io/hugo-catalog-site/decap/"><meta property="article:section" content><meta property="og:site_name" content="Hugo Catalog"></head><body><div class=layout><div class=navigation><button class=nav-close onclick=toggleNav()>
<i class="fa-regular fa-circle-xmark"></i></button><div class=brand><a href=https://benmarte.github.io/hugo-catalog-site/><img src=https://benmarte.github.io/hugo-catalog-site/images/hugo-catalog-icon.svg alt=Logo class=img-fluid></a></div><ul class=nav><li class=nav-item><a class=nav-link aria-current=page href=https://benmarte.github.io/hugo-catalog-site/>What is Hugo Catalog?</a></li><li class=nav-item><a class=nav-link aria-current=page href=https://benmarte.github.io/hugo-catalog-site/installation/>Installation</a></li><li class=nav-item><a class=nav-link aria-current=page href=https://benmarte.github.io/hugo-catalog-site/shortcodes/>Shortcodes</a></li><li class=nav-item><a class="nav-link active" aria-current=page href=https://benmarte.github.io/hugo-catalog-site/decap/>Decap</a><nav id=TableOfContents><ul><li><a href=#what-is-decap>What is Decap?</a></li><li><a href=#creating-a-github-oauth-app>Creating a Github OAuth App</a></li><li><a href=#creating-a-gitlab-oauth-app>Creating a Gitlab OAuth App</a></li><li><a href=#setting-up-your-netlify-site>Setting up your netlify site</a></li><li><a href=#configure-decap-for-github-pages>Configure Decap for Github Pages</a></li><li><a href=#configure-decap-for-gitlab-pages>Configure Decap for Gitlab Pages</a></li><li><a href=#deployment-via-github>Deployment via Github</a></li><li><a href=#deployment-via-gitlab>Deployment via Gitlab</a></li><li><a href=#accessing-decap>Accessing Decap</a></li><li><a href=#shortcodes-in-decap>Shortcodes in Decap</a></li></ul></nav></li><li class=nav-item><a class=nav-link aria-current=page href=https://benmarte.github.io/hugo-catalog-site/logos/>Logos</a></li></ul></div><div id=content><div class=page-header><button class=nav-toggle onclick=toggleNav()>
<i class="fa-solid fa-bars"></i></button><div><h2 class=section-title>Hugo Catalog</h2><h1 class=page-title>Decap</h1></div></div><div class=content-body><h2 id=what-is-decap>What is Decap?</h2><div class=span-1><img src=https://benmarte.github.io/hugo-catalog-site/images/decap-logo.svg alt="Decap Logo"></div><p>Decap is an open source <strong>W</strong>hat <strong>Y</strong>ou <strong>S</strong>ee <strong>I</strong>s <strong>W</strong>hat <strong>Y</strong>ou <strong>G</strong>et (<strong>WYSIWYG</strong>) that can be used with static site generators in order to provide an easy to use editor view while still taking advantage of using your CI/CD pipeline for deploying your site.</p><p><strong>Prerequisites:</strong></p><ul><li><a href=https://netlify>Netlify</a> account</li><li><a href=https://github.com>Github</a> OAuth app</li></ul><p>In order to enable decap you need to have a <a href=https://netlify>Netlify</a> and <a href=https://github.com>Github</a> account, if you don&rsquo;t have an account sign up for a free one before getting started.</p><h2 id=creating-a-github-oauth-app>Creating a Github OAuth App</h2><p>We will be using Github for authenticating our users in order for them to login and make edits to our site.</p><p>Go here: <a href=https://github.com/settings/developers>https://github.com/settings/developers</a> and click on <strong>New OAuth App</strong> button and fill out the fields for:</p><ul><li><strong>Applicatiomn Name:</strong> Your apps name</li><li><strong>Homepage URL:</strong> URL for your site</li><li><strong>Application Description:</strong> Text description for your app.</li><li><strong>Authorization Callback URL:</strong> <strong><code>https://api.netlify.com/auth/done</code></strong></li></ul><p><img src=https://benmarte.github.io/hugo-catalog-site/images/oauth-app.png alt="OAuth App"></p><div class="span- hint-shortcode info"><strong>Authorization Callback URL</strong> value specifically needs to be: <strong><code>https://api.netlify.com/auth/done</code></strong></div><p>Once your OAuth app has been created you will need to get your <strong>Client ID</strong> and <strong>Client Secret</strong>. Click on <strong>Generate new client secret</strong> to get your client secret.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/client-secret.png alt="OAuth App"></p><div class="span- hint-shortcode warning">Your client secret will be visible as long as you don&rsquo;t navigate away from this page, so save both your <strong>Client ID</strong> and <strong>Client Secret</strong> because we are going to need them for the next step.</div><h2 id=creating-a-gitlab-oauth-app>Creating a Gitlab OAuth App</h2><p>Click this link: <a href=https://gitlab.com/oauth/applications>https://gitlab.com/oauth/applications</a> in order to create a Gitlab OAuth application. In the name field you can put whatever you want in this example we are going to use <strong>Decap CMS</strong> and in the <strong>Redirect URI</strong> you need to use <strong><code>https://yoursite.com/admin/</code></strong>, uncheck the <strong>Confidential</strong> checkmark and under <strong>Scopes</strong> select <strong>api</strong>, then click <strong>Save application</strong>.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/gitlab-oauth.png alt="Gitlab OAuth"></p><div class="span- hint-shortcode info">It is important to note that the <strong>Redirect URI</strong> needs to have a trailing <code>/</code> in order for it to work properly, ie: <strong><code>https://yoursite.com/admin/</code></strong></div><h2 id=setting-up-your-netlify-site>Setting up your netlify site</h2><p>Once you login to Netlify under <strong>Sites</strong> click on the <strong>add new site</strong> button dropdown and select deploy manually.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/add-new-site.png alt="Add New Site"></p><p>We are not going to actually use Netlify to host our site we are simply going to use it to enable our editors to login with github so they can make changes with decap.</p><p>On the next page simply create a new text file and save it as <strong>index.html</strong> and upload the file to Netlify. Or you can download <a href=https://benmarte.github.io/hugo-catalog-site/downloads/index.zip>this</a> file and upload it.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/netlify-upload.png alt="Netlify Upload"></p><p>Once your site has been created click on <strong>site settings</strong>, <strong>access control</strong> and scroll down to the <strong>OAuth</strong> section and under <strong>Authentication providers</strong> click <strong>Install provider</strong>.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/install-provider.png alt="Install Provider"></p><p>In the modal windows select <strong>Github</strong> as your provider and insert the <strong>Client ID</strong> and <strong>Client Secret</strong> from the previous step and click install.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/oauth-provider.png alt="Install Provider"></p><p>Next, click on <strong>Site settings</strong>, <strong>Domain management</strong> and click on <strong>Add a domain</strong> insert your sites domain name. If you are using Github pages to host your site you need to insert: <code>you_repo_name.github.io</code> and click <strong>Verify</strong>.</p><h2 id=configure-decap-for-github-pages>Configure Decap for Github Pages</h2><p>Now we need to edit decaps configuration file which is located in <code>/themes/hugo-catalog/static/admin/config.yml</code> and you need to set the <strong>repo</strong> value to your github sites repository and your <strong>site_domain</strong> to your netlify subdomain.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>backend</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># backend to use</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>github</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># your github repo ex: benmarte/hugo-catalog</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>repo</span>: <span style=color:#ae81ff>benmarte/hugo-catalog-site</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># optional, defaults to master</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>branch</span>: <span style=color:#ae81ff>main</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># your netlify site name ex: netlify-site-name.netlify.app</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>site_domain</span>: <span style=color:#ae81ff>hugo-catalog.netlify.app</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># directory where your images are stored</span>
</span></span><span style=display:flex><span><span style=color:#f92672>media_folder</span>: <span style=color:#ae81ff>/static/images</span>
</span></span><span style=display:flex><span><span style=color:#75715e># the path the site will use to store your images</span>
</span></span><span style=display:flex><span><span style=color:#f92672>public_folder</span>: <span style=color:#ae81ff>/images</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># enables decap editorial workflow</span>
</span></span><span style=display:flex><span><span style=color:#f92672>publish_mode</span>: <span style=color:#ae81ff>editorial_workflow</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># URL to your company logo to be used in the login screen, logo max width is 300px. Logo can be a relative path or a CDN url.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>logo_url</span>: <span style=color:#ae81ff>../images/hugo-catalog-logo.svg</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Collection of pages decap can access</span>
</span></span><span style=display:flex><span><span style=color:#f92672>collections</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># name</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;content&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># label displayed in decap under collections</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>label</span>: <span style=color:#e6db74>&#34;Pages&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># directory with markdow files</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>folder</span>: <span style=color:#e6db74>&#34;/content&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>create</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># the filename will be used to generate the url to the page</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>slug</span>: <span style=color:#e6db74>&#34;{{slug}}&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># fields accessible in decap when creating or editing a page</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>fields</span>:
</span></span><span style=display:flex><span>      - { <span style=color:#f92672>label</span>: <span style=color:#e6db74>&#34;Title&#34;</span><span style=color:#f92672>, name</span>: <span style=color:#e6db74>&#34;title&#34;</span><span style=color:#f92672>, widget</span>: <span style=color:#e6db74>&#34;string&#34;</span> }
</span></span><span style=display:flex><span>      - { <span style=color:#f92672>label</span>: <span style=color:#e6db74>&#34;Body&#34;</span><span style=color:#f92672>, name</span>: <span style=color:#e6db74>&#34;body&#34;</span><span style=color:#f92672>, widget</span>: <span style=color:#e6db74>&#34;markdown&#34;</span> }
</span></span></code></pre></div><h2 id=configure-decap-for-gitlab-pages>Configure Decap for Gitlab Pages</h2><p>Gitlab supports pkce authorization so we will need to add 2 additional parameters to our <strong><code>backend</code></strong> entry in our <code>config.yml</code> these are: <strong>auth_type</strong> and <strong>app_id</strong>.</p><p>Let&rsquo;s edit our decap configuration file which is located in <code>/themes/hugo-catalog/static/admin/config.yml</code> and you need to set the <strong>repo</strong> value to your gitlab sites repository, the <strong>site_domain</strong> to your netlify subdomain and “auth_type” to <strong><code>pkce</code></strong> and <strong>app_id</strong> to your Gitlab OAuth App id.</p><p>To get your Gitlab OAuth App ID go here: <a href=https://gitlab.com/oauth/applications>https://gitlab.com/oauth/applications</a>, click on the application to be able to see it&rsquo;s details and copy the <strong>Application ID</strong>.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/gitlab-app-id.png alt="Gitlab App ID"></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>backend</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># backend to use</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>gitlab</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># your github repo ex: benmarte/hugo-catalog</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>repo</span>: <span style=color:#ae81ff>benmarte/hugo-catalog-site</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># optional, defaults to master</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>branch</span>: <span style=color:#ae81ff>main</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># your netlify site name ex: netlify-site-name.netlify.app</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>site_domain</span>: <span style=color:#ae81ff>hugo-catalog.netlify.app</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># required for pkce - uncomment if using gitlab pages</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>auth_type</span>: <span style=color:#ae81ff>pkce</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># application ID from your GitLab OAuth App - uncomment if using gitlab pages</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>app_id</span>: <span style=color:#ae81ff>your-app-id</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># directory where your images are stored</span>
</span></span><span style=display:flex><span><span style=color:#f92672>media_folder</span>: <span style=color:#ae81ff>/static/images</span>
</span></span><span style=display:flex><span><span style=color:#75715e># the path the site will use to store your images</span>
</span></span><span style=display:flex><span><span style=color:#f92672>public_folder</span>: <span style=color:#ae81ff>/images</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># enables decap editorial workflow</span>
</span></span><span style=display:flex><span><span style=color:#f92672>publish_mode</span>: <span style=color:#ae81ff>editorial_workflow</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># URL to your company logo to be used in the login screen, logo max width is 300px. Logo can be a relative path or a CDN url.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>logo_url</span>: <span style=color:#ae81ff>../images/hugo-catalog-logo.svg</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Collection of pages decap can access</span>
</span></span><span style=display:flex><span><span style=color:#f92672>collections</span>:
</span></span><span style=display:flex><span>  <span style=color:#75715e># name</span>
</span></span><span style=display:flex><span>  - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#34;content&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># label displayed in decap under collections</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>label</span>: <span style=color:#e6db74>&#34;Pages&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># directory with markdow files</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>folder</span>: <span style=color:#e6db74>&#34;/content&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>create</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># the filename will be used to generate the url to the page</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>slug</span>: <span style=color:#e6db74>&#34;{{slug}}&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># fields accessible in decap when creating or editing a page</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>fields</span>:
</span></span><span style=display:flex><span>      - { <span style=color:#f92672>label</span>: <span style=color:#e6db74>&#34;Title&#34;</span><span style=color:#f92672>, name</span>: <span style=color:#e6db74>&#34;title&#34;</span><span style=color:#f92672>, widget</span>: <span style=color:#e6db74>&#34;string&#34;</span> }
</span></span><span style=display:flex><span>      - { <span style=color:#f92672>label</span>: <span style=color:#e6db74>&#34;Body&#34;</span><span style=color:#f92672>, name</span>: <span style=color:#e6db74>&#34;body&#34;</span><span style=color:#f92672>, widget</span>: <span style=color:#e6db74>&#34;markdown&#34;</span> }
</span></span></code></pre></div><h2 id=deployment-via-github>Deployment via Github</h2><p>Hugo Catalog also includes a Github workflow in order to publish your site using Githubs <strong>C</strong>ontinous <strong>I</strong>ntegration / <strong>C</strong>ontinuos <strong>D</strong>evelopment (<strong>CI/CD</strong>) pipeline.</p><p>Move the github folder located in: <code>/themes/hugo-catalog</code> and move it to your sites root, rename it to <code>.github</code>.</p><p>In order to deploy your site to <a href=https://pages.github.com/>Github Pages</a> we need to add a <strong>BASE_URL</strong> environment variable in your <strong>site settings</strong> in Github.</p><p>Click on <strong>Settings</strong>, on the side navigation click on <strong>Secrets and variables</strong> and select <strong>Actions</strong>.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/github-secrets.png alt="Github Secrets"></p><p>On the <strong>Actions secrets and variables</strong> page click on <strong>New repository secret</strong> and in the <strong>Name</strong> field put <strong>BASE_URL</strong> and in the <strong>Secret</strong> field put your sites URL.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/github-baseurl.png alt="Github BASE_URL"></p><h2 id=deployment-via-gitlab>Deployment via Gitlab</h2><p>We also provide a Gitlab CI template for you to use if you want to host your site on <a href=https://about.gitlab.com/stages-devops-lifecycle/pages/>Gitlab Pages</a> and use it&rsquo;s CI/CD pipeline to publish your site. Simply move the <code>.gitlab-ci.yml</code> file located in: <code>/themes/hugo-catalog/gitlab</code> the root directory of your site.</p><p>In Gitlab click on the <strong>Settings</strong> link in the side navigation, click on <strong>CI/CD</strong> and click on <strong>Expand</strong> in the <strong>Variables</strong> section.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/gitlab-variables.png alt="Gitlab CI variables"></p><p>Click on <strong>Add variable</strong> and in the <strong>Key</strong> value enter <strong>BASE_URL</strong> and in the <strong>Value</strong> field put your sites URL.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/gitlab-baseurl.png alt="Gitlab BASE_URL"></p><h2 id=accessing-decap>Accessing Decap</h2><p>Now that we have completed configuring decap it&rsquo;s time to take it for a spin. After you have deployed your site if everything was configured correctly you should be able to access decap by visiting <code>https://yoursiteurl.com/admin</code> and you will be greeted with a login with github/gitlab page (will vary based on deployment method).</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/github-decap-login.png alt="Github Decap Login"></p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/gitlab-decap-login.png alt="Gitlab Decap Login"></p><p>Once you login you will see a list of pages if you have any otherwise you can create a new page and start using decap.</p><p><img src=https://benmarte.github.io/hugo-catalog-site/images/decap-dashboard.png alt="Decap Dashboard"></p><div class="span- hint-shortcode info">For more information regarding decaps features please refer to the official documentation: <a href=https://decapcms.org/docs/intro/>https://decapcms.org/docs/intro/</a></div><h2 id=shortcodes-in-decap>Shortcodes in Decap</h2><p>This is a feature I will be working on in order to use Hugo Catalog shortcodes directly in Decap, so stay tuned for future release updates to know when they will be available.</p></div></div></div><script src=https://benmarte.github.io/hugo-catalog-site/js/navtoggle.js></script></body></html>